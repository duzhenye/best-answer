{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@duzhenye/best-answer/external assign \"flarum.extensions['duzhenye-user-directory']\"","webpack://@duzhenye/best-answer/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@duzhenye/best-answer/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@duzhenye/best-answer/./node_modules/@babel/runtime/regenerator/index.js","webpack://@duzhenye/best-answer/webpack/bootstrap","webpack://@duzhenye/best-answer/webpack/runtime/compat get default export","webpack://@duzhenye/best-answer/webpack/runtime/define property getters","webpack://@duzhenye/best-answer/webpack/runtime/hasOwnProperty shorthand","webpack://@duzhenye/best-answer/webpack/runtime/make namespace object","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/app']\"","webpack://@duzhenye/best-answer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@duzhenye/best-answer/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@duzhenye/best-answer/./src/forum/components/SelectBestAnswerNotification.ts","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/extend']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/components/Button']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/Post']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/Component']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/helpers/humanTime']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/components/Link']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@duzhenye/best-answer/./src/forum/components/SelectBestAnswerItem.tsx","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/helpers/userOnline']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@duzhenye/best-answer/./src/forum/components/BestAnswerFooterPreview.tsx","webpack://@duzhenye/best-answer/./src/forum/addBestAnswerView.tsx","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@duzhenye/best-answer/./src/forum/components/BestAnswerBadge.tsx","webpack://@duzhenye/best-answer/./src/forum/components/AwardedBestAnswerNotification.ts","webpack://@duzhenye/best-answer/./src/forum/components/BestAnswerInDiscussionNotification.ts","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@duzhenye/best-answer/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@duzhenye/best-answer/./src/common/addBestAnswerCountSort.ts","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/Search']\"","webpack://@duzhenye/best-answer/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/helpers/highlight']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['tags/common/helpers/tagsLabel']\"","webpack://@duzhenye/best-answer/./src/forum/components/SolutionSearchItem.tsx","webpack://@duzhenye/best-answer/./src/forum/components/SolutionSearchSource.tsx","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/DiscussionsSearchSource']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@duzhenye/best-answer/./src/forum/components/SolvedFilter.tsx","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@duzhenye/best-answer/./src/forum/components/index.ts","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/extenders']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['tags/common/models/Tag']\"","webpack://@duzhenye/best-answer/./src/common/extend.ts","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/models/User']\"","webpack://@duzhenye/best-answer/external root \"flarum.core.compat['common/Model']\"","webpack://@duzhenye/best-answer/./src/forum/extend.ts","webpack://@duzhenye/best-answer/./src/forum/index.ts","webpack://@duzhenye/best-answer/./src/forum/addBestAnswerAction.tsx","webpack://@duzhenye/best-answer/./src/forum/addAnsweredBadge.tsx","webpack://@duzhenye/best-answer/./src/forum/addBestAnswerCountToUsers.tsx","webpack://@duzhenye/best-answer/./src/forum/extenders/extendNotifications.ts","webpack://@duzhenye/best-answer/./src/forum/extenders/extendSearch.ts","webpack://@duzhenye/best-answer/./src/forum/extenders/extendDiscussionSearchSource.tsx","webpack://@duzhenye/best-answer/./src/forum/extenders/extendIndexPage.tsx","webpack://@duzhenye/best-answer/./src/forum/extenders/extendDiscussionListState.tsx","webpack://@duzhenye/best-answer/./src/forum/extenders/extendDiscussionComposer.tsx"],"sourcesContent":["module.exports = flarum.extensions['duzhenye-user-directory'];","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import type Discussion from 'flarum/common/models/Discussion';\r\nimport app from 'flarum/forum/app';\r\nimport Notification from 'flarum/forum/components/Notification';\r\n\r\nexport default class SelectBestAnswerNotification extends Notification {\r\n  icon() {\r\n    return 'fas fa-comment-dots';\r\n  }\r\n\r\n  href() {\r\n    const notification = this.attrs.notification;\r\n    const discussion = notification.subject() as Discussion;\r\n\r\n    return app.route.discussion(discussion);\r\n  }\r\n\r\n  content() {\r\n    return app.translator.trans('duzhenye-best-answer.forum.notification.content');\r\n  }\r\n\r\n  excerpt() {\r\n    return null;\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","import app from 'flarum/forum/app';\r\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport humanTime from 'flarum/common/helpers/humanTime';\r\nimport Link from 'flarum/common/components/Link';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport Discussion from 'flarum/common/models/Discussion';\r\nimport Mithril from 'mithril';\r\nimport Post from 'flarum/common/models/Post';\r\n\r\nexport interface ISelectBestAnswerItemAttrs extends ComponentAttrs {\r\n  post: Post;\r\n  discussion: Discussion;\r\n}\r\n\r\nexport default class SelectBestAnswerItem extends Component<ISelectBestAnswerItemAttrs> {\r\n  post!: Post;\r\n  discussion!: Discussion;\r\n\r\n  oninit(vnode: Mithril.Vnode<ISelectBestAnswerItemAttrs, this>) {\r\n    super.oninit(vnode);\r\n\r\n    this.post = this.attrs.post;\r\n    this.discussion = this.attrs.discussion;\r\n  }\r\n\r\n  view() {\r\n    return <li className=\"Post--BestAnswer\">{this.items().toArray()}</li>;\r\n  }\r\n\r\n  getSetTime(discussion: Discussion) {\r\n    if (!discussion.bestAnswerSetAt?.()) {\r\n      return;\r\n    }\r\n    const bestAnswerSetAt = discussion.bestAnswerSetAt?.();\r\n    if (!bestAnswerSetAt) {\r\n      return;\r\n    }\r\n    return humanTime(bestAnswerSetAt);\r\n  }\r\n\r\n  items(): ItemList<Mithril.Children> {\r\n    const items = new ItemList<Mithril.Children>();\r\n\r\n    items.add(\r\n      'post',\r\n      this.post ? (\r\n        <span>\r\n          {icon('fas fa-check')}\r\n          {app.translator.trans('duzhenye-best-answer.forum.best_answer_button')}\r\n        </span>\r\n      ) : (\r\n        <Link href={app.route.post(this.post as Post)} data-number={(this.post as Post).number()}>\r\n          {icon('fas fa-check')}\r\n          {app.translator.trans('duzhenye-best-answer.forum.best_answer_button')}\r\n        </Link>\r\n      )\r\n    );\r\n\r\n    const bestAnswerUser = this.discussion.bestAnswerUser?.();\r\n\r\n    bestAnswerUser &&\r\n      items.add(\r\n        'user',\r\n        <span className=\"BestAnswer--User\">\r\n          {app.translator.trans('duzhenye-best-answer.forum.best_answer_label', {\r\n            user: this.discussion.bestAnswerUser?.(),\r\n            time_set: this.getSetTime(this.discussion),\r\n            a: <a onclick={() => m.route.set(app.route.user(bestAnswerUser))} />,\r\n          })}\r\n        </span>\r\n      );\r\n\r\n    return items;\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/userOnline'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","import app from 'flarum/forum/app';\r\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\r\nimport Mithril from 'mithril';\r\nimport username from 'flarum/common/helpers/username';\r\nimport userOnline from 'flarum/common/helpers/userOnline';\r\nimport Link from 'flarum/common/components/Link';\r\nimport classList from 'flarum/common/utils/classList';\r\nimport SelectBestAnswerItem from './SelectBestAnswerItem';\r\nimport Post from 'flarum/common/models/Post';\r\nimport User from 'flarum/common/models/User';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport Discussion from 'flarum/common/models/Discussion';\r\nimport humanTime from 'flarum/common/helpers/humanTime';\r\n\r\nexport interface BestAnswerFooterPreviewAttrs extends ComponentAttrs {\r\n  post: Post;\r\n  user: User;\r\n  discussion: Discussion;\r\n}\r\n\r\nexport default class BestAnswerFooterPreview extends Component<BestAnswerFooterPreviewAttrs> {\r\n  user!: User;\r\n  post!: Post;\r\n  discussion!: Discussion;\r\n\r\n  oninit(vnode: Mithril.Vnode<BestAnswerFooterPreviewAttrs, this>) {\r\n    super.oninit(vnode);\r\n\r\n    this.user = this.attrs.user;\r\n    this.post = this.attrs.post;\r\n    this.discussion = this.attrs.discussion;\r\n  }\r\n\r\n  view() {\r\n    const maxLines = app.forum.attribute<number>('duzhenye-best-answer.show_max_lines');\r\n\r\n    return (\r\n      <div className=\"CommentPost\" onclick={() => app.current.get('stream').goToNumber(this.post.number())}>\r\n        <div className=\"Post-header\">\r\n          <ul>{this.headerItems().toArray()}</ul>\r\n        </div>\r\n        <div className={classList('Post-body', maxLines > 0 && 'Post-body--truncate')} style={{ '--max-lines': maxLines }}>\r\n          {m.trust(this.postContent())}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  postContent() {\r\n    return this.post.contentHtml();\r\n  }\r\n\r\n  /**\r\n   * To maintain compatibility with existing styling, custom themes, etc, each item here must be\r\n   * wrapped in a <li> element.\r\n   *\r\n   * @todo: Remove this requirement for Flarum 2.0\r\n   */\r\n  headerItems(): ItemList<Mithril.Children> {\r\n    const items = new ItemList<Mithril.Children>();\r\n\r\n    items.add('user', this.userItem()), 100;\r\n    items.add('meta', this.metaItem()), 90;\r\n    items.add('bestAnswer', <SelectBestAnswerItem post={this.post} discussion={this.discussion} />, -100);\r\n\r\n    return items;\r\n  }\r\n\r\n  userItem(): Mithril.Children {\r\n    return (\r\n      <li className=\"item-user\">\r\n        <div className=\"PostUser\">\r\n          {this.user && userOnline(this.user)}\r\n          <h3>{this.user ? <Link href={app.route.user(this.user)}>{username(this.user)}</Link> : username(this.user)}</h3>\r\n        </div>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  metaItem(): Mithril.Children {\r\n    const post = this.post;\r\n    return (\r\n      <li className=\"item-meta\">\r\n        <span className=\"PostMeta-time\">{humanTime(post.createdAt())}</span>\r\n      </li>\r\n    );\r\n  }\r\n}","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport CommentPost from 'flarum/forum/components/CommentPost';\r\nimport PostComponent from 'flarum/forum/components/Post';\r\nimport SelectBestAnswerItem from './components/SelectBestAnswerItem';\r\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\r\nimport Button from 'flarum/common/components/Button';\r\nimport BestAnswerFooterPreview from './components/BestAnswerFooterPreview';\r\n\r\nexport default () => {\r\n  extend(CommentPost.prototype, 'headerItems', function (items) {\r\n    const post = this.attrs.post;\r\n    const discussion = post.discussion();\r\n\r\n    if (discussion?.hasBestAnswer() && discussion.bestAnswerPost() && discussion.bestAnswerPost()?.id() === post.id() && !post.isHidden()) {\r\n      items.add('isBestAnswer', <SelectBestAnswerItem post={post} discussion={discussion} />, -100);\r\n    }\r\n  });\r\n\r\n  extend(CommentPost.prototype, 'footerItems', function (items) {\r\n    const thisPost = this.attrs.post;\r\n    const discussion = thisPost.discussion();\r\n    const post = discussion.hasBestAnswer() && discussion.bestAnswerPost();\r\n\r\n    if (post && !post.isHidden() && thisPost.number() === 1 && !thisPost.isHidden()) {\r\n      const user = post.user();\r\n\r\n      items.add('bestAnswerPost', <BestAnswerFooterPreview post={post} user={user} discussion={discussion} />, -10);\r\n    }\r\n  });\r\n\r\n  extend(PostComponent.prototype, 'elementAttrs', function (elementAttrs) {\r\n    const post = this.attrs.post;\r\n    const discussion = post.discussion();\r\n\r\n    if (discussion?.hasBestAnswer() && discussion.bestAnswerPost() && discussion.bestAnswerPost().id() === post.id() && !post.isHidden()) {\r\n      elementAttrs.className ? (elementAttrs.className += ' Post--bestAnswer') : (elementAttrs.className = 'Post--bestAnswer');\r\n    }\r\n  });\r\n\r\n  extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\r\n    if (!app.forum.attribute<boolean>('bestAnswerDiscussionSidebarJumpButton')) return;\r\n\r\n    // @ts-ignore\r\n    const discussion = this.discussion;\r\n\r\n    if (discussion === null) return;\r\n\r\n    const post = discussion.hasBestAnswer() && discussion.bestAnswerPost();\r\n\r\n    if (post && !post.isHidden() && post.number() !== 1 && !discussion.bestAnswerPost()?.isHidden()) {\r\n      items.add(\r\n        'jumpToBestAnswer',\r\n        <Button\r\n          className=\"Button Button-jumpBestAnswer\"\r\n          icon=\"fas fa-check\"\r\n          onclick={() => app.current.get('stream').goToNumber(post.number())}\r\n          aria-label={app.translator.trans('duzhenye-best-answer.forum.discussion.jump_to_best_answer_button')}\r\n        >\r\n          {app.translator.trans('duzhenye-best-answer.forum.discussion.jump_to_best_answer_button')}\r\n        </Button>,\r\n        90\r\n      );\r\n    }\r\n  });\r\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","import Badge, { IBadgeAttrs } from 'flarum/common/components/Badge';\r\nimport app from 'flarum/forum/app';\r\nimport extractText from 'flarum/common/utils/extractText';\r\n\r\nexport default class BestAnswerBadge extends Badge {\r\n  static initAttrs(attrs: IBadgeAttrs) {\r\n    attrs.type = 'bestAnswer';\r\n    attrs.icon = 'fas fa-check';\r\n    attrs.label = extractText(app.translator.trans('duzhenye-best-answer.forum.answered_badge'));\r\n  }\r\n}","import type Discussion from 'flarum/common/models/Discussion';\r\nimport app from 'flarum/forum/app';\r\nimport Notification from 'flarum/forum/components/Notification';\r\n\r\nexport default class AwardedBestAnswerNotification extends Notification {\r\n  icon() {\r\n    return 'fas fa-check';\r\n  }\r\n\r\n  href() {\r\n    const notification = this.attrs.notification;\r\n    const discussion = notification.subject() as Discussion;\r\n\r\n    return app.route.discussion(discussion);\r\n  }\r\n\r\n  content() {\r\n    const user = this.attrs.notification.fromUser();\r\n    return app.translator.trans('duzhenye-best-answer.forum.notification.awarded', {\r\n      user: user,\r\n    });\r\n  }\r\n\r\n  excerpt() {\r\n    return null;\r\n  }\r\n}","import type Discussion from 'flarum/common/models/Discussion';\r\nimport app from 'flarum/forum/app';\r\nimport Notification from 'flarum/forum/components/Notification';\r\n\r\nexport default class BestAnswerInDiscussionNotification extends Notification {\r\n  icon() {\r\n    return 'fas fa-check';\r\n  }\r\n\r\n  href() {\r\n    const notification = this.attrs.notification;\r\n    const discussion = notification.subject() as Discussion;\r\n\r\n    return app.route.discussion(discussion);\r\n  }\r\n\r\n  content() {\r\n    const user = this.attrs.notification.fromUser();\r\n    return app.translator.trans('duzhenye-best-answer.forum.notification.best_answer_in_discussion', {\r\n      user: user,\r\n    });\r\n  }\r\n\r\n  excerpt() {\r\n    return null;\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","import { override } from 'flarum/common/extend';\r\n\r\nexport default () => {\r\n  const DuzhenyeUserDirectory = require('@duzhenye-user-directory');\r\n\r\n  if (!DuzhenyeUserDirectory) return;\r\n\r\n  override(DuzhenyeUserDirectory.SortMap.prototype, 'sortMap', (map) => ({\r\n    ...map(),\r\n    most_best_answers: '-bestAnswerCount',\r\n    least_best_answers: 'bestAnswerCount',\r\n  }));\r\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Search'];","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/highlight'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/common/helpers/tagsLabel'];","import app from 'flarum/forum/app';\r\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\r\nimport Link from 'flarum/common/components/Link';\r\nimport highlight from 'flarum/common/helpers/highlight';\r\nimport type Discussion from 'flarum/common/models/Discussion';\r\nimport type Post from 'flarum/common/models/Post';\r\nimport type Mithril from 'mithril';\r\nimport tagsLabel from 'flarum/tags/common/helpers/tagsLabel';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport type Tag from 'flarum/tags/common/models/Tag';\r\n\r\nexport interface SolutionSearchItemAttrs extends ComponentAttrs {\r\n  query: string;\r\n  discussion: Discussion;\r\n  bestAnswerPost: Post;\r\n  mostRelevantPost: Post;\r\n  tags: false | (Tag | undefined)[];\r\n}\r\n\r\nexport default class SolutionSearchItem extends Component<SolutionSearchItemAttrs> {\r\n  query!: string;\r\n  discussion!: Discussion;\r\n  bestAnswerPost!: Post | null | undefined;\r\n  mostRelevantPost!: Post | null | undefined;\r\n  tags!: false | (Tag | undefined)[];\r\n\r\n  oninit(vnode: Mithril.Vnode<ComponentAttrs, this>) {\r\n    super.oninit(vnode);\r\n\r\n    this.query = this.attrs.query;\r\n    this.discussion = this.attrs.discussion;\r\n    this.bestAnswerPost = this.attrs.bestAnswerPost;\r\n    this.mostRelevantPost = this.attrs.mostRelevantPost;\r\n    this.tags = this.attrs.tags;\r\n  }\r\n\r\n  view() {\r\n    return (\r\n      <li className=\"SolutionSearchResult DiscussionSearchResult\" data-index={'discussions' + this.discussion.id()}>\r\n        <Link href={app.route.discussion(this.discussion, (this.bestAnswerPost && this.bestAnswerPost.number()) || 0)}>\r\n          {this.viewItems().toArray()}\r\n        </Link>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  discussionTitle() {\r\n    return this.discussion.title();\r\n  }\r\n\r\n  bestAnswerContent() {\r\n    return this.bestAnswerPost?.contentPlain();\r\n  }\r\n\r\n  mostRelevantContent() {\r\n    return this.mostRelevantPost?.contentPlain();\r\n  }\r\n\r\n  viewItems(): ItemList<Mithril.Children> {\r\n    const items = new ItemList<Mithril.Children>();\r\n\r\n    app.forum.attribute<boolean>('showTagsInSearchResults') &&\r\n      items.add('tags', <div className=\"SolutionSearchResult-tags\">{tagsLabel(this.tags)}</div>, 100);\r\n\r\n    items.add('discussion-title', <div className=\"DiscussionSearchResult-title\">{highlight(this.discussionTitle(), this.query)}</div>, 90);\r\n\r\n    !!this.mostRelevantPost &&\r\n      items.add(\r\n        'most-relevant',\r\n        <div className=\"DiscussionSearchResult-excerpt\">{highlight(this.mostRelevantContent() ?? '', this.query, 100)}</div>,\r\n        80\r\n      );\r\n\r\n    !!this.bestAnswerPost &&\r\n      items.add(\r\n        'best-answer',\r\n        <div className=\"DiscussionSearchResult-excerpt SolutionSearchResult-bestAnswer\">\r\n          {highlight(this.bestAnswerContent() ?? '', this.query, 100)}\r\n        </div>,\r\n        70\r\n      );\r\n\r\n    return items;\r\n  }\r\n}","import app from 'flarum/forum/app';\r\nimport Discussion from 'flarum/common/models/Discussion';\r\nimport LinkButton from 'flarum/common/components/LinkButton';\r\nimport { SearchSource } from 'flarum/forum/components/Search';\r\nimport type Mithril from 'mithril';\r\nimport BestAnswerBadge from './BestAnswerBadge';\r\nimport SolutionSearchItem from './SolutionSearchItem';\r\n\r\nexport default class SolutionSearchSource implements SearchSource {\r\n  protected results = new Map<string, Discussion[]>();\r\n  queryString: string | null = null;\r\n\r\n  async search(query: string): Promise<void> {\r\n    query = query.toLowerCase();\r\n\r\n    this.results.set(query, []);\r\n\r\n    this.setQueryString(query);\r\n\r\n    const params = {\r\n      filter: { q: this.queryString || query },\r\n      page: { limit: this.limit() },\r\n      include: this.includes().join(','),\r\n    };\r\n\r\n    return app.store.find<Discussion[]>('discussions', params).then((results) => {\r\n      this.results.set(query, results);\r\n      m.redraw();\r\n    });\r\n  }\r\n\r\n  view(query: string): Array<Mithril.Vnode> {\r\n    query = query.toLowerCase();\r\n\r\n    this.setQueryString(query);\r\n\r\n    const results = (this.results.get(query) || []).map((discussion) => {\r\n      const bestAnswerPost = discussion.bestAnswerPost();\r\n      const mostRelevantPost = discussion.mostRelevantPost();\r\n      const tags = discussion.tags();\r\n\r\n      return (\r\n        <SolutionSearchItem query={query} discussion={discussion} bestAnswerPost={bestAnswerPost} mostRelevantPost={mostRelevantPost} tags={tags} />\r\n      );\r\n    }) as Array<Mithril.Vnode>;\r\n\r\n    return [\r\n      <li className=\"Dropdown-header\">\r\n        <BestAnswerBadge /> {app.translator.trans('duzhenye-best-answer.forum.search.discussions_solutions_heading')}\r\n      </li>,\r\n      <li>\r\n        <LinkButton icon=\"fas fa-search\" href={app.route('index', { q: this.queryString })}>\r\n          {app.translator.trans('duzhenye-best-answer.forum.search.all_discussions_solutions_button', { query })}\r\n        </LinkButton>\r\n      </li>,\r\n      ...results,\r\n    ];\r\n  }\r\n\r\n  includes(): string[] {\r\n    return ['mostRelevantPost', 'bestAnswerPost', 'tags'];\r\n  }\r\n\r\n  limit(): number {\r\n    return 3;\r\n  }\r\n\r\n  queryMutators(): string[] {\r\n    return ['is:solved'];\r\n  }\r\n\r\n  setQueryString(query: string): void {\r\n    this.queryString = query + ' ' + this.queryMutators().join(' ');\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionsSearchSource'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","import app from 'flarum/forum/app';\r\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\r\nimport Dropdown from 'flarum/common/components/Dropdown';\r\nimport Button from 'flarum/common/components/Button';\r\nimport type Tag from 'flarum/tags/common/models/Tag';\r\n\r\nexport interface SolvedFilterAttrs extends ComponentAttrs {\r\n  alwaysShow?: boolean;\r\n}\r\n\r\nexport default class SolvedFilter extends Component<SolvedFilterAttrs> {\r\n  view() {\r\n    if (!this.shouldShowFilter()) return null;\r\n\r\n    const selected = app.discussions.bestAnswer as unknown as number;\r\n    const options = ['all', 'solved', 'unsolved'];\r\n\r\n    return Dropdown.component(\r\n      {\r\n        buttonClassName: 'Button',\r\n        label: app.translator.trans(\r\n          `duzhenye-best-answer.forum.filter.${options[selected] || Object.keys(options).map((key) => options[Number(key)])[0]}_label`\r\n        ),\r\n        accessibleToggleLabel: app.translator.trans('duzhenye-best-answer.forum.filter.accessible_label'),\r\n      },\r\n      Object.keys(options).map((value) => {\r\n        const label = options[Number(value)];\r\n        const active = (selected || Object.keys(options)[0]) === value;\r\n\r\n        return Button.component(\r\n          {\r\n            icon: active ? 'fas fa-check' : true,\r\n            active: active,\r\n            onclick: () => {\r\n              app.discussions.bestAnswer = value;\r\n              if (value === '0') {\r\n                delete app.discussions.bestAnswer;\r\n              }\r\n              this.reloadDiscussions();\r\n            },\r\n          },\r\n          app.translator.trans(`duzhenye-best-answer.forum.filter.${label}_label`)\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  reloadDiscussions(): void {\r\n    app.discussions.refresh();\r\n  }\r\n\r\n  shouldShowFilter() {\r\n    const { alwaysShow } = this.attrs;\r\n\r\n    if (alwaysShow) return true;\r\n\r\n    if (!app.forum.attribute('showBestAnswerFilterUi')) return false;\r\n\r\n    const tag: Tag = app.current.get('tag');\r\n\r\n    if (!tag?.isQnA?.()) {\r\n      if (app.discussions.bestAnswer) {\r\n        delete app.discussions.bestAnswer;\r\n        app.discussions.refresh();\r\n      }\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","import AwardedBestAnswerNotification from './AwardedBestAnswerNotification';\r\nimport BestAnswerBadge from './BestAnswerBadge';\r\nimport BestAnswerFooterPreview from './BestAnswerFooterPreview';\r\nimport BestAnswerInDiscussionNotification from './BestAnswerInDiscussionNotification';\r\nimport SelectBestAnswerItem from './SelectBestAnswerItem';\r\nimport SelectBestAnswerNotification from './SelectBestAnswerNotification';\r\nimport SolutionSearchItem from './SolutionSearchItem';\r\nimport SolutionSearchSource from './SolutionSearchSource';\r\nimport SolvedFilter from './SolvedFilter';\r\n\r\nexport const components = {\r\n  SelectBestAnswerItem,\r\n  SolutionSearchSource,\r\n  BestAnswerFooterPreview,\r\n  AwardedBestAnswerNotification,\r\n  BestAnswerBadge,\r\n  BestAnswerInDiscussionNotification,\r\n  SelectBestAnswerNotification,\r\n  SolutionSearchItem,\r\n  SolvedFilter,\r\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extenders'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['tags/common/models/Tag'];","import Extend from 'flarum/common/extenders';\r\nimport Tag from 'flarum/tags/common/models/Tag';\r\n\r\nexport default [\r\n  new Extend.Model(Tag) //\r\n    .attribute<boolean>('isQnA')\r\n    .attribute<boolean>('reminders'),\r\n];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Discussion from 'flarum/common/models/Discussion';\r\nimport commonExtend from '../common/extend';\r\nimport Extend from 'flarum/common/extenders';\r\nimport type Post from 'flarum/common/models/Post';\r\nimport User from 'flarum/common/models/User';\r\nimport Model from 'flarum/common/Model';\r\n\r\nexport default [\r\n  ...commonExtend,\r\n\r\n  new Extend.Model(Discussion) //\r\n    .hasOne<Post>('bestAnswerPost')\r\n    .hasOne<User>('bestAnswerUser')\r\n    .attribute<boolean | number>('hasBestAnswer')\r\n    .attribute<boolean>('canSelectBestAnswer')\r\n    .attribute('bestAnswerSetAt', Model.transformDate),\r\n\r\n  new Extend.Model(User) //\r\n    .attribute<number>('bestAnswerCount'),\r\n];","import app from 'flarum/forum/app';\r\nimport SelectBestAnswerNotification from './components/SelectBestAnswerNotification';\r\nimport addBestAnswerAction from './addBestAnswerAction';\r\nimport addBestAnswerView from './addBestAnswerView';\r\nimport addAnsweredBadge from './addAnsweredBadge';\r\nimport AwardedBestAnswerNotification from './components/AwardedBestAnswerNotification';\r\nimport BestAnswerInDiscussionNotification from './components/BestAnswerInDiscussionNotification';\r\nimport extendNotifications from './extenders/extendNotifications';\r\nimport addBestAnswerCountToUsers from './addBestAnswerCountToUsers';\r\nimport addBestAnswerCountSort from '../common/addBestAnswerCountSort';\r\nimport extendSearch from './extenders/extendSearch';\r\nimport extendDiscussionsSearchSource from './extenders/extendDiscussionSearchSource';\r\nimport extendIndexPage from './extenders/extendIndexPage';\r\nimport extendDiscussionListState from './extenders/extendDiscussionListState';\r\nimport extendDiscussionComposer from './extenders/extendDiscussionComposer';\r\n\r\nexport * from './components';\r\n\r\nexport { default as extend } from './extend';\r\n\r\napp.initializers.add('duzhenye/best-answer', () => {\r\n  app.notificationComponents.selectBestAnswer = SelectBestAnswerNotification;\r\n  app.notificationComponents.awardedBestAnswer = AwardedBestAnswerNotification;\r\n  app.notificationComponents.bestAnswerInDiscussion = BestAnswerInDiscussionNotification;\r\n\r\n  addAnsweredBadge();\r\n  addBestAnswerAction();\r\n  addBestAnswerView();\r\n  addBestAnswerCountToUsers();\r\n  addBestAnswerCountSort();\r\n\r\n  extendNotifications();\r\n  extendSearch();\r\n  extendDiscussionsSearchSource();\r\n  extendIndexPage();\r\n  extendDiscussionListState();\r\n  extendDiscussionComposer();\r\n});","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport Button from 'flarum/common/components/Button';\r\nimport PostControls from 'flarum/forum/utils/PostControls';\r\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\r\nimport CommentPost from 'flarum/forum/components/CommentPost';\r\nimport Discussion from 'flarum/common/models/Discussion';\r\nimport Post from 'flarum/common/models/Post';\r\nimport extractText from 'flarum/common/utils/extractText';\r\n\r\nexport default function addBestAnswerAction() {\r\n  const ineligible = (discussion: Discussion, post: Post) => {\r\n    return post.isHidden() || post.number() === 1 || !discussion.canSelectBestAnswer() || !app.session.user;\r\n  };\r\n\r\n  const blockSelectOwnPost = (post: Post): boolean => {\r\n    const user = post.user();\r\n    return !app.forum.attribute<boolean>('canSelectBestAnswerOwnPost') && user !== false && user.id() === app.session.user?.id();\r\n  };\r\n\r\n  const isThisBestAnswer = (discussion: Discussion, post: Post): boolean => {\r\n    const bestAnswerPost = discussion.bestAnswerPost();\r\n    const hasBestAnswer = discussion.hasBestAnswer();\r\n    return hasBestAnswer !== undefined && hasBestAnswer && bestAnswerPost !== null && bestAnswerPost.id() === post.id();\r\n  };\r\n\r\n  const actionLabel = (isBestAnswer: boolean): string => {\r\n    return extractText(app.translator.trans(isBestAnswer ? 'duzhenye-best-answer.forum.remove_best_answer' : 'duzhenye-best-answer.forum.this_best_answer'));\r\n  };\r\n\r\n  const saveDiscussion = (discussion: Discussion, isBestAnswer: boolean, post: Post) =>\r\n    discussion\r\n      .save(\r\n        {\r\n          bestAnswerPostId: isBestAnswer ? post.id() : 0,\r\n          bestAnswerUserId: app.session.user?.id(),\r\n          relationships: isBestAnswer ? { bestAnswerPost: post, bestAnswerUser: app.session.user } : { bestAnswerPost: null },\r\n        },\r\n        {\r\n          params: {\r\n            include: 'tags',\r\n          },\r\n        }\r\n      )\r\n      .then(() => {\r\n        if (!isBestAnswer) {\r\n          if (discussion.data.relationships) {\r\n            delete discussion.data.relationships.bestAnswerPost;\r\n            delete discussion.data.relationships.bestAnswerUser;\r\n          }\r\n        }\r\n\r\n        if (app.current.matches(DiscussionPage)) {\r\n          app.current.get('stream').update();\r\n        }\r\n\r\n        m.redraw();\r\n\r\n        if (isBestAnswer) {\r\n          m.route.set(app.route.discussion(discussion));\r\n        }\r\n      });\r\n\r\n  extend(PostControls, 'moderationControls', function (items, post) {\r\n    if (app.forum.attribute('useAlternativeBestAnswerUi')) return;\r\n\r\n    const discussion = post.discussion();\r\n    let isBestAnswer = isThisBestAnswer(discussion, post);\r\n\r\n    post.pushAttributes({ isBestAnswer });\r\n\r\n    if (post.contentType() !== 'comment') return;\r\n\r\n    if (ineligible(discussion, post) || blockSelectOwnPost(post) || !app.current.matches(DiscussionPage)) return;\r\n\r\n    items.add(\r\n      'bestAnswer',\r\n      <Button\r\n        icon={`fa${isBestAnswer ? 's' : 'r'} fa-comment-dots`}\r\n        onclick={() => {\r\n          isBestAnswer = !isBestAnswer;\r\n\r\n          saveDiscussion(discussion, isBestAnswer, post).finally(() => {\r\n            isBestAnswer = isThisBestAnswer(discussion, post);\r\n          });\r\n        }}\r\n      >\r\n        {actionLabel(isBestAnswer)}\r\n      </Button>\r\n    );\r\n  });\r\n\r\n  extend(CommentPost.prototype, 'actionItems', function (items) {\r\n    if (!app.forum.attribute('useAlternativeBestAnswerUi')) return;\r\n\r\n    const post = this.attrs.post;\r\n    const discussion = this.attrs.post.discussion();\r\n    let isBestAnswer = isThisBestAnswer(discussion, post);\r\n    let hasBestAnswer = discussion.bestAnswerPost() !== null;\r\n\r\n    post.pushAttributes({ isBestAnswer });\r\n\r\n    if (ineligible(discussion, post) || blockSelectOwnPost(post) || !app.current.matches(DiscussionPage)) return;\r\n\r\n    items.add(\r\n      'bestAnswer',\r\n      <Button\r\n        className={`Button Button--${!hasBestAnswer || isBestAnswer ? 'primary' : 'link'}`}\r\n        onclick={() => {\r\n          hasBestAnswer = !hasBestAnswer;\r\n          isBestAnswer = !isBestAnswer;\r\n\r\n          saveDiscussion(discussion, isBestAnswer, post).finally(() => {\r\n            hasBestAnswer = !!discussion.hasBestAnswer() && discussion.bestAnswerPost() !== null;\r\n            isBestAnswer = isThisBestAnswer(discussion, post);\r\n          });\r\n        }}\r\n      >\r\n        {actionLabel(isBestAnswer)}\r\n      </Button>\r\n    );\r\n  });\r\n}","import { extend } from 'flarum/common/extend';\r\nimport Discussion from 'flarum/common/models/Discussion';\r\nimport BestAnswerBadge from './components/BestAnswerBadge';\r\n\r\nexport default function () {\r\n  extend(Discussion.prototype, 'badges', function (this: Discussion, items) {\r\n    if (this.hasBestAnswer() && !items.has('hidden')) {\r\n      items.add('bestAnswer', <BestAnswerBadge />);\r\n    }\r\n  });\r\n}","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport UserCard from 'flarum/forum/components/UserCard';\r\nimport icon from 'flarum/common/helpers/icon';\r\n\r\nimport type Mithril from 'mithril';\r\nimport type User from 'flarum/common/models/User';\r\n\r\nexport default function addBestAnswerCountToUsers() {\r\n  extend(UserCard.prototype, 'infoItems', function (items: ItemList<Mithril.Children>) {\r\n    // @ts-expect-error\r\n    const user = this.attrs.user as User;\r\n\r\n    items.add(\r\n      'best-answer-count',\r\n      <span className=\"UserCard-bestAnswerCount\">\r\n        {icon('fas fa-check')}\r\n        {app.translator.trans('duzhenye-best-answer.forum.user.best-answer-count', {\r\n          count: user.bestAnswerCount(),\r\n        })}\r\n      </span>,\r\n      55\r\n    );\r\n  });\r\n}","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\r\nimport type Mithril from 'mithril';\r\n\r\nexport default function () {\r\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items: ItemList<{ name: string; icon: string; label: Mithril.Children }>) {\r\n    items.add('awardedBestAnswer', {\r\n      name: 'awardedBestAnswer',\r\n      icon: 'fas fa-check',\r\n      label: app.translator.trans('duzhenye-best-answer.forum.notification.preferences.awarded_best_answer'),\r\n    });\r\n    items.add('bestAnswerInDiscussion', {\r\n      name: 'bestAnswerInDiscussion',\r\n      icon: 'fas fa-check',\r\n      label: app.translator.trans('duzhenye-best-answer.forum.notification.preferences.best_answer_in_discussion'),\r\n    });\r\n    items.add('selectBestAnswer', {\r\n      name: 'selectBestAnswer',\r\n      icon: 'fas fa-stopwatch',\r\n      label: app.translator.trans('duzhenye-best-answer.forum.notification.preferences.select_best_answer'),\r\n    });\r\n  });\r\n}","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport Search, { SearchSource } from 'flarum/forum/components/Search';\r\nimport SolutionSearchSource from '../components/SolutionSearchSource';\r\n\r\nexport default function extendSearch() {\r\n  extend(Search.prototype, 'sourceItems', function (items: ItemList<SearchSource>) {\r\n    if (app.forum.attribute<boolean>('solutionSearchEnabled')) {\r\n      items.add('solution', new SolutionSearchSource(), 110);\r\n    }\r\n  });\r\n}\r\n","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport DiscussionsSearchSource from 'flarum/forum/components/DiscussionsSearchSource';\r\n\r\nexport default function extendDiscussionsSearchSource() {\r\n  extend(DiscussionsSearchSource.prototype, 'queryMutators', function (mutators: string[]) {\r\n    // This will only apply when using flarum/core 1.8.6 or newer\r\n    if (app.forum.attribute<boolean>('removeSolutionResultsFromMainSearch')) {\r\n      mutators.push('-is:solved');\r\n    }\r\n  });\r\n}","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport IndexPage from 'flarum/forum/components/IndexPage';\r\nimport SolvedFilter from '../components/SolvedFilter';\r\n\r\nexport default function extendIndexPage() {\r\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\r\n    const tag = this.currentTag();\r\n\r\n    if (!tag?.isQnA?.()) return;\r\n\r\n    const canStartDiscussion = app.forum.attribute('canStartDiscussion') || !app.session.user;\r\n    const cta = items.get('newDiscussion');\r\n    cta.children = app.translator.trans(\r\n      canStartDiscussion ? 'duzhenye-best-answer.forum.index.ask_question' : 'duzhenye-best-answer.forum.index.cannot_ask_question'\r\n    );\r\n\r\n    if (items.has('startDiscussion')) {\r\n      items.setContent('startDiscussion', cta);\r\n    }\r\n  });\r\n\r\n  extend(IndexPage.prototype, 'viewItems', function (items) {\r\n    items.add('solved-filter', <SolvedFilter />);\r\n  });\r\n}","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\r\nimport type { PaginatedListParams } from 'flarum/common/states/PaginatedListState';\r\n\r\nexport default function extendDiscussionListState() {\r\n  extend(DiscussionListState.prototype, 'requestParams', function (params: PaginatedListParams) {\r\n    if (app.discussions.bestAnswer) {\r\n      const negate = app.discussions.bestAnswer === '2';\r\n      const prepend = negate ? '-' : '';\r\n\r\n      if (!params.filter) {\r\n        params.filter = {};\r\n      }\r\n\r\n      params.filter[`${prepend}solved-discussions`] = 'true';\r\n\r\n      if (params.filter.q) {\r\n        params.filter.q += ` ${prepend}is:solved`;\r\n      }\r\n    }\r\n  });\r\n}","import { extend } from 'flarum/common/extend';\r\nimport app from 'flarum/forum/app';\r\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\r\nimport type Tag from 'flarum/tags/common/models/Tag';\r\n\r\nexport default function extendDiscussionComposer() {\r\n  extend(DiscussionComposer.prototype, 'headerItems', function (items) {\r\n    const tags = this.composer.fields.tags as Tag[];\r\n    if (tags === undefined) return;\r\n\r\n    const qna = tags.some((t) => t.isQnA());\r\n\r\n    if (!qna) return;\r\n\r\n    // @ts-expect-error\r\n    this.attrs.titlePlaceholder = app.translator.trans('duzhenye-best-answer.forum.composer.titlePlaceholder');\r\n\r\n    if (items.has('discussionTitle')) {\r\n      items.setContent(\r\n        'discussionTitle',\r\n        <h3>\r\n          <input\r\n            className=\"FormControl\"\r\n            bidi={this.title}\r\n            // @ts-expect-error\r\n            placeholder={this.attrs.titlePlaceholder}\r\n            // @ts-expect-error\r\n            disabled={!!this.attrs.disabled}\r\n            onkeydown={this.onkeydown.bind(this)}\r\n          />\r\n        </h3>\r\n      );\r\n    }\r\n  });\r\n}"],"names":["module","exports","flarum","extensions","_typeof","require","_regeneratorRuntime","e","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","key","get","obj","prop","core","compat","_setPrototypeOf","bind","_inheritsLoose","SelectBestAnswerNotification","_Notification","apply","arguments","_proto","icon","href","discussion","attrs","notification","subject","app","content","trans","excerpt","Notification","SelectBestAnswerItem","_Component","_this","_len","args","Array","_key","concat","post","oninit","vnode","view","m","className","items","toArray","getSetTime","bestAnswerSetAt","humanTime","_this$discussion$best","_this$discussion","_this$discussion$best2","_this$discussion2","ItemList","add","Link","number","bestAnswerUser","user","time_set","onclick","route","set","Component","BestAnswerFooterPreview","_this2","maxLines","attribute","goToNumber","headerItems","classList","style","trust","postContent","contentHtml","userItem","metaItem","userOnline","username","createdAt","BestAnswerBadge","_Badge","initAttrs","label","extractText","Badge","AwardedBestAnswerNotification","fromUser","BestAnswerInDiscussionNotification","_extends","assign","asyncGeneratorStep","SolutionSearchItem","query","bestAnswerPost","mostRelevantPost","tags","id","viewItems","discussionTitle","title","bestAnswerContent","_this$bestAnswerPost","contentPlain","mostRelevantContent","_this$mostRelevantPos","_this$mostRelevantCon","_this$bestAnswerConte","tagsLabel","highlight","SolutionSearchSource","results","Map","queryString","search","_search","_callee","params","_context","toLowerCase","setQueryString","filter","q","page","limit","include","includes","join","find","redraw","_next","_throw","_x","map","LinkButton","queryMutators","SolvedFilter","shouldShowFilter","selected","bestAnswer","options","Dropdown","buttonClassName","Number","accessibleToggleLabel","active","Button","reloadDiscussions","refresh","alwaysShow","tag","isQnA","components","Extend","Tag","commonExtend","Discussion","hasOne","Model","User","ineligible","blockSelectOwnPost","isThisBestAnswer","actionLabel","saveDiscussion","DuzhenyeUserDirectory","selectBestAnswer","awardedBestAnswer","bestAnswerInDiscussion","extend","hasBestAnswer","has","isHidden","canSelectBestAnswer","_app$session$user","isBestAnswer","_app$session$user2","save","bestAnswerPostId","bestAnswerUserId","relationships","data","matches","DiscussionPage","update","PostControls","pushAttributes","contentType","CommentPost","_discussion$bestAnswe","thisPost","PostComponent","elementAttrs","_discussion$bestAnswe2","UserCard","count","bestAnswerCount","override","SortMap","most_best_answers","least_best_answers","NotificationGrid","Search","DiscussionsSearchSource","mutators","IndexPage","currentTag","canStartDiscussion","cta","children","setContent","DiscussionListState","prepend","DiscussionComposer","composer","fields","some","titlePlaceholder","bidi","placeholder","disabled","onkeydown"],"sourceRoot":""}